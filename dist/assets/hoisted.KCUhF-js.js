import"./hoisted.CP1yPtPt.js";class e{constructor(){this.form=document.getElementById("contact-form"),this.successState=document.getElementById("success-state"),this.sendAnotherBtn=document.querySelector(".send-another-btn"),this.form&&this.init()}init(){this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.sendAnotherBtn&&this.sendAnotherBtn.addEventListener("click",this.resetForm.bind(this));this.form.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>this.clearError(e))})}async handleSubmit(e){if(e.preventDefault(),!this.validateForm())return;const t=this.form.querySelector(".btn-submit"),r=new FormData(this.form);try{t.setAttribute("loading","true"),t.disabled=!0,await this.simulateSubmit(r),this.showSuccess()}catch(s){console.error("Error al enviar formulario:",s),this.showError("Error al enviar el mensaje. Por favor, inténtalo de nuevo.")}finally{t.classList.remove("loading"),t.disabled=!1}}async simulateSubmit(e){await new Promise(e=>setTimeout(e,2e3)),console.log("Formulario enviado:",Object.fromEntries(e))}validateForm(){const e=this.form.querySelectorAll("input[required], textarea[required]");let t=!0;return e.forEach(e=>{this.validateField(e)||(t=!1)}),t}validateField(e){const t=e.value.trim();let r=!0,s="";if(e.required&&!t)r=!1,s="Este campo es obligatorio";else if("email"===e.type&&t){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(r=!1,s="Por favor, introduce un email válido")}else"name"===e.name&&t&&t.length<2?(r=!1,s="El nombre debe tener al menos 2 caracteres"):"message"===e.name&&t&&t.length<10&&(r=!1,s="El mensaje debe tener al menos 10 caracteres");return this.showFieldError(e,s),r}showFieldError(e,t){const r=document.getElementById(`${e.name}-error`);t?(e.classList.add("error"),r.textContent=t,r.classList.add("show")):(e.classList.remove("error"),r.classList.remove("show"))}clearError(e){e.classList.remove("error");document.getElementById(`${e.name}-error`).classList.remove("show")}showSuccess(){this.successState.classList.add("show")}showError(e){alert(e)}resetForm(){this.form.reset(),this.successState.classList.remove("show");this.form.querySelectorAll("input, textarea").forEach(e=>this.clearError(e))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new e}):new e;
