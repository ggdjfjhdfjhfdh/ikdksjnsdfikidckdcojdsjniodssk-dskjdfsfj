"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("Nueva versión disponible. ¿Recargar página?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload())})})}catch(e){console.log("Service Worker registration failed:",e)}}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}));const e=function(){const e="undefined"!=typeof document&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),t={},n=function(n,o,i){let s=Promise.resolve();if(o&&o.length>0){const n=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),l=r?.nonce||r?.getAttribute("nonce");s=Promise.allSettled(o.map(o=>{if(o=function(e,t){return new URL(e,t).href}(o,i),o in t)return;t[o]=!0;const s=o.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(!!i)for(let e=n.length-1;e>=0;e--){const t=n[e];if(t.href===o&&(!s||"stylesheet"===t.rel))return}else if(document.querySelector(`link[href="${o}"]${r}`))return;const a=document.createElement("link");return a.rel=s?"stylesheet":e,s||(a.as="script"),a.crossOrigin="",a.href=o,l&&a.setAttribute("nonce",l),document.head.appendChild(a),s?new Promise((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${o}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(e=>{for(const t of e||[])"rejected"===t.status&&r(t.reason);return n().catch(r)})};n(()=>import("./microinteractions.CVac8vM0.js"),[],import.meta.url),n(()=>import("./performance.CRwZMMbC.js"),[],import.meta.url);class o{constructor(){this.nav=document.getElementById("main-nav"),this.mobileToggle=document.getElementById("mobile-toggle"),this.mobileMenu=document.getElementById("mobile-menu"),this.langToggle=document.getElementById("lang-toggle"),this.langDropdown=document.getElementById("lang-dropdown"),this.lastScrollY=0,this.isMenuOpen=!1,this.init()}init(){this.setupScrollHandler(),this.setupMobileMenu(),this.setupLanguageSwitcher(),this.setupActiveLinks(),this.setupKeyboardNavigation()}setupScrollHandler(){let e=!1;const t=()=>{const t=window.scrollY;t>50?this.nav.classList.add("scrolled"):this.nav.classList.remove("scrolled"),t>this.lastScrollY&&t>100?this.nav.style.transform="translateY(-100%)":this.nav.style.transform="translateY(0)",this.lastScrollY=t,e=!1};window.addEventListener("scroll",()=>{e||(requestAnimationFrame(t),e=!0)})}setupMobileMenu(){this.mobileToggle?.addEventListener("click",()=>{this.toggleMobileMenu()}),document.addEventListener("click",e=>{this.isMenuOpen&&!this.nav.contains(e.target)&&this.closeMobileMenu()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isMenuOpen&&this.closeMobileMenu()})}toggleMobileMenu(){this.isMenuOpen?this.closeMobileMenu():this.openMobileMenu()}openMobileMenu(){this.isMenuOpen=!0,this.mobileToggle.classList.add("active"),this.mobileMenu.classList.add("active"),this.mobileToggle.setAttribute("aria-label","Cerrar menú"),document.body.style.overflow="hidden"}closeMobileMenu(){this.isMenuOpen=!1,this.mobileToggle.classList.remove("active"),this.mobileMenu.classList.remove("active"),this.mobileToggle.setAttribute("aria-label","Abrir menú"),document.body.style.overflow=""}setupActiveLinks(){const e=window.location.pathname;this.nav.querySelectorAll(".nav-link, .mobile-link").forEach(t=>{const n=t.getAttribute("href");(n===e||"/"!==e&&"/"!==n&&e.includes(n))&&t.classList.add("active")})}setupLanguageSwitcher(){if(!this.langToggle||!this.langDropdown)return;let e=!1;this.langToggle.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),e?this.closeLangDropdown():this.openLangDropdown(),e=!e}),document.addEventListener("click",t=>{!e||this.langToggle.contains(t.target)||this.langDropdown.contains(t.target)||(this.closeLangDropdown(),e=!1)}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e&&(this.closeLangDropdown(),e=!1,this.langToggle.focus())})}openLangDropdown(){this.langDropdown.classList.add("active"),this.langDropdown.style.opacity="1",this.langDropdown.style.visibility="visible",this.langDropdown.style.transform="translateY(0)",this.langToggle.setAttribute("aria-expanded","true")}closeLangDropdown(){this.langDropdown.classList.remove("active"),this.langDropdown.style.opacity="0",this.langDropdown.style.visibility="hidden",this.langDropdown.style.transform="translateY(-8px)",this.langToggle.setAttribute("aria-expanded","false")}setupKeyboardNavigation(){this.langToggle?.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.langToggle.click())})}}function i(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".mobile-menu");e&&(e.classList.remove("active"),e.setAttribute("aria-label","Abrir menú")),t&&t.classList.remove("active"),document.body.style.overflow=""}i(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{i(),new o}):(i(),new o),document.addEventListener("astro:before-preparation",()=>{i()}),window.addEventListener("pageshow",()=>{i()});export{n as _};
